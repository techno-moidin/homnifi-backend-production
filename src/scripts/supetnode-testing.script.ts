// const data = [
//   {
//     id: '8349460488',
//     upline_id: null,
//     username: 'user1',
//     email: 'user1@gmail.com',
//     productId: 'xk-validator',
//     isProduct: true,
//   },

//   {
//     id: '1374142504',
//     upline_id: '8349460488',
//     username: 'user2',
//     email: 'user2@gmail.com',
//     productId: 'xkvalidator-hmnf-f',
//     isProduct: true,
//   },
//   {
//     id: '9245771798',
//     upline_id: '8349460488',
//     username: 'user3',
//     email: 'user3@gmail.com',
//     productId: 'xk-10000',
//   },
//   {
//     id: '1021672209',
//     upline_id: '8349460488',
//     username: 'user4',
//     email: 'user4@gmail.com',
//     isProduct: true,
//     productId: 'xk-5000',
//   },
//   {
//     id: '2658899644',
//     upline_id: '8349460488',
//     username: 'user5',
//     email: 'user5@gmail.com',
//     isProduct: true,
//     productId: 'xk-10000',
//   },

//   {
//     id: '6684907081',
//     upline_id: '8349460488',
//     username: 'user7',
//     email: 'user7@gmail.com',
//     isProduct: true,
//     productId: 'xk-1000',
//   },
//   {
//     id: '7173816291',
//     upline_id: '8349460488',
//     username: 'user6',
//     email: 'user6@gmail.com',
//     isProduct: true,
//     productId: 'xk-10000',
//   },
//   // {
//   //   id: '3739692612',
//   //   upline_id: '8349460488',
//   //   username: 'user8',
//   //   email: 'user8@gmail.com',
//   //   isProduct: true,
//   // },

//   // {
//   //   id: '7901174161',
//   //   upline_id: '1374142504',
//   //   username: 'user9',
//   //   email: 'user9@gmail.com',
//   //   isProduct: true,
//   // },

//   // {
//   //   id: '6723482673',
//   //   upline_id: '1374142504',
//   //   username: 'user10',
//   //   email: 'user10@gmail.com',
//   // },

//   // {
//   //   id: '6711713312',
//   //   upline_id: '1374142504',
//   //   username: 'user11',
//   //   email: 'user11@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '1994202201',
//   //   upline_id: '6711713312',
//   //   username: 'user12',
//   //   email: 'user12@gmail.com',
//   //   isProduct: true,
//   // },

//   // {
//   //   id: '8887710170',
//   //   upline_id: '6711713312',
//   //   username: 'user13',
//   //   email: 'user13@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '9104772995',
//   //   upline_id: '6711713312',
//   //   username: 'user14',
//   //   email: 'user14@gmail.com',
//   //   isProduct: true,
//   // },

//   // {
//   //   id: '4137485985',
//   //   upline_id: '6711713312',
//   //   username: 'user15',
//   //   email: 'user15@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '2980672794',
//   //   upline_id: '6711713312',
//   //   username: 'user16',
//   //   email: 'user16@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '9943056313',
//   //   upline_id: '4137485985',
//   //   username: 'user17',
//   //   email: 'user17@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '7480837742',
//   //   upline_id: '4137485985',
//   //   username: 'user18',
//   //   email: 'user18@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '8790068968',
//   //   upline_id: '7480837742',
//   //   username: 'user19',
//   //   email: 'user19@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '8839125468',
//   //   upline_id: '8790068968',
//   //   username: 'user20',
//   //   email: 'user20@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '1402983935',
//   //   upline_id: '8790068968',
//   //   username: 'user21',
//   //   email: 'user21@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '7787885594',
//   //   upline_id: '8790068968',
//   //   username: 'user22',
//   //   email: 'user22@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '9895259442',
//   //   upline_id: '1402983935',
//   //   username: 'user23',
//   //   email: 'user23@gmail.com',
//   // },
//   // {
//   //   id: '7520591764',
//   //   upline_id: '9895259442',
//   //   username: 'user24',
//   //   email: 'user24@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '8787134966',
//   //   upline_id: '7520591764',
//   //   username: 'user25',
//   //   email: 'user25@gmail.com',
//   //   isProduct: true,
//   // },
//   // {
//   //   id: '8969216459',
//   //   upline_id: '7520591764',
//   //   username: 'user26',
//   //   email: 'user26@gmail.com',
//   // },
//   // {
//   //   id: '1008716517',
//   //   upline_id: '8969216459',
//   //   username: 'user27',
//   //   email: 'user27@gmail.com',
//   //   isProduct: true,
//   // },
// ];

// import { NestFactory } from '@nestjs/core';
// import { AppModule } from '../app.module';
// import { Model } from 'mongoose';
// import { CloudKMachine } from '../cloud-k/schemas/cloudk-machine.schema';
// import { UsersService } from '../users/users.service';
// import { CloudKService } from '../cloud-k/cloud-k.service';

// async function bootstrap() {
//   const appContext = await NestFactory.createApplicationContext(AppModule);
//   const userService = appContext.get(UsersService);
//   const cloudkService = appContext.get(CloudKService);

//   const products: any = await cloudkService.getAllProducts();
//   //   cloudkService.createNewMachine

//   const results = [];
//   for (let index = 0; index < data.length; index++) {
//     const element = data[index];
//     const randomIndex = Math.floor(Math.random() * products.length);
//     const selectedProduct = products[randomIndex];

//     let parent;
//     const user = await userService.getOrCreateUserByBID(
//       element.id,
//       element.email,
//     );
//     if (element?.upline_id) {
//       parent = await userService.getOrCreateUserByBID(
//         element.upline_id,
//         element.email,
//       );
//     }
//     await userService.createActiveTreeUser({
//       user: user._id,
//       upline: parent?._id,
//     });
//     if (element.isProduct) {
//       // const userMachine = await cloudkService.createNewMachineV2(
//       //   element.productId,
//       //   element.id,

//       // );
//       userMachine.collatoral = selectedProduct.price;
//       await userMachine.save();
//     }

//     results.push(user._id);
//   }
//   process.exit(0);
// }

// bootstrap().catch((err) => {
//   console.error('Error populating database:', err);
//   process.exit(1);
// });
